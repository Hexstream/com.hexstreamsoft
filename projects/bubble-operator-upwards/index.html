<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <title>bubble-operator-upwards | Projects | HexstreamSoft</title>
    <link href="../../global.css" rel="stylesheet" type="text/css" />
    <link href="../projects.css" rel="stylesheet" type="text/css" />
    <script src="http://use.edgefonts.net/sanvito-pro-display.js"></script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1783234-3']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>

    <nav id="site-nav">

      <nav class="breadcrumbs">
        <a href="../../">HexstreamSoft</a>
        <span class="separator"> » </span>
        <a href="../">Projects</a>
        <span class="separator"> » </span>
        <a href="../categories/macros/">Macros</a>
        <span class="separator"> » </span>
        <a href="../categories/macros/utilities/">Utilities</a>
        <span class="separator"> » </span>
        <a class="here">bubble-operator-upwards</a>
        <div class="float-clear"></div>
      </nav>

      <nav class="ancestors-nav">

        <div class="level-separator"></div>

        <nav class="navbox" id="macro-utilities-projects_navbox">
          <h1>
            <a href="../categories/macros/utilities/">Macro utilities</a>
          </h1>
          <ul>
            <li><a href="../parse-number-range/">parse-number-range</a></li>
            <li>
              <a class="here">
                bubble-operator-upwards
                <span class="here-indicator-left"> </span>
                <span class="here-indicator-right"> </span>
              </a>
            </li>
          </ul>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox" id="macros_projects_navbox">
          <h1>
            <a href="../categories/macros/">Macros</a>
          </h1>
          <ul>
            <li><a href="../categories/macros/simple/">Simple</a></li>
            <li><a href="../categories/macros/extensible/">Extensible</a></li>
            <li>
              <a href="../categories/macros/utilities/">
                Utilities
                <span class="here-indicator-left"> </span>
                <span class="here-indicator-right"> </span>
              </a>
            </li>
          </ul>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox" id="projects_navbox">
          <h1 class="box-header">
            <a href="../">Projects</a>
          </h1>
          <ul>
            <li><a href="../categories/macros/">Macros <span class="here-indicator-left"> </span> <span class="here-indicator-right"></span></a></li>
            <li><a href="../categories/data-structures/">Data structures</a></li>
            <li><a href="../categories/uncategorized/">Uncategorized</a></li>
          </ul>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox" id="main_navbox">
          <h1>
            <a href="../../">HexstreamSoft</a>
          </h1>
          <ul>
            <li><a href="../../introduction.html">Introduction</a></li>
            <li><a href="../">Projects <span class="here-indicator-left"> </span> <span class="here-indicator-right"> </span></a></li>
            <li><a href="../../tweets/">Tweets</a></li>
            <li><a href="../../worknotes/">Worknotes</a></li>
            <li><a href="../../accounts/">Accounts</a></li>
            <li><a href="../../resources/">Resources</a></li>
          </ul>
        </nav>

      </nav>

    </nav>

    <div id="content">

      <header id="page-header">
        <h1>bubble-operator-upwards</h1>
        <p class="description">An utility function in Quicklisp.</p>
      </header>

      <div id="project-info">
        <table class="factsheet">
          <tbody>
            <tr>
              <th class="project-type property">Project Type</th>
              <td class="project-type" colspan="2">Library</td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="library-programming-language property">Programming language</th>
              <td class="library-programming-language" colspan="2">Common Lisp</td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="project-status property">Status</th>
              <td class="project-status good-news" colspan="2">Ready-to-use</td>
            </tr>
            <tr>
              <th class="project-license property"><a href="https://github.com/Hexstream/bubble-operator-upwards/blob/master/UNLICENSE">License</a></th>
              <td class="project-license good-news" colspan="2"><a href="../../resources/#unlicense">Public Domain</a></td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="library-type property">Library type</th>
              <td class="library-type" colspan="2">Utility function</td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="project-complexity property">Project complexity</th>
              <td class="project-complexity" colspan="2">Trivial</td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="project-latest-release" rowspan="2"><a href="bubble-operator-upwards_latest.tar.gz">Latest release</a></th>
              <th class="project-latest-release-version property">Version</th>
              <td class="project-latest-release-version">1.0</td>
            </tr>
            <tr>
              <th class="project-latest-release-date property">Date</th>
              <td class="project-latest-release-date">4 nov 2012</td>
            </tr>
          </tbody>
          <tbody>
            <tr>
              <th class="project-quicklisp" rowspan="2">
                Quicklisp
                <br />
                <span class="as-of-dist">(<a href="http://blog.quicklisp.org/2012/11/november-2012-quicklisp-dist-update-now.html">Nov 2012 dist</a> and later)</span>
              </th>
              <th class="project-quicklisp-status property">Status</th>
              <td class="project-quicklisp-status good-news">Available</td>
            </tr>
            <tr>
              <th class="project-quicklisp-version property">Version</th>
              <td class="project-quicklisp-version good-news">Latest</td>
            </tr>
          </tbody>

        </table>

        <nav class="navbox" id="external-projects_navbox">
          <h1>
            External project pages
          </h1>
          <ul>
            <li><a href="http://github.com/Hexstream/bubble-operator-upwards">Github</a></li>
            <li><a href="http://quickdocs.org/bubble-operator-upwards">Quickdocs</a></li>
            <li><a href="http://cliki.net/bubble-operator-upwards">CLiki</a></li>
            <li><a href="http://common-lisp.net/project/cl-test-grid/library/bubble-operator-upwards.html">cl-test-grid</a></li>
          </ul>
        </nav>

      </div>

      <p>bubble-operator-upwards is a function that "bubbles an operator upwards" in a form, demultiplexing all alternative branches by way of cartesian product. This operation is notably useful for easy implementation of certain kinds of shorthand notations in macros. A cartesian-product function is also exported, as it's needed to implement the main function.</p>

      <pre>Examples
--------

(bubble-operator-upwards 'and '(plate (and ham eggs) beans))
=&gt;
(AND (PLATE HAM BEANS)
     (PLATE EGGS BEANS))


(bubble-operator-upwards 'alt '(section (alt 1 2 3) - (alt "a" "b"))
                         :result-kind :branches)
=&gt;
((SECTION 1 - "a") (SECTION 1 - "b")
 (SECTION 2 - "a") (SECTION 2 - "b")
 (SECTION 3 - "a") (SECTION 3 - "b"))


(bubble-operator-upwards 'or '(&gt;&gt; (or ul ol)
                                  (or (:class (or "important" "urgent"))
                                      (id "first-priority"))))
=&gt;
(OR (&gt;&gt; UL (:CLASS "important"))
    (&gt;&gt; UL (:CLASS "urgent"))
    (&gt;&gt; UL (ID "first-priority"))
    (&gt;&gt; OL (:CLASS "important"))
    (&gt;&gt; OL (:CLASS "urgent"))
    (&gt;&gt; OL (ID "first-priority")))


API
---

First of all, in the way of packages there's the
BUBBLE-OPERATOR-UPWARDS package, which is also nicknamed BUBBLE-OP-UP.
It exports the functions BUBBLE-OPERATOR-UPWARDS and
CARTESIAN-PRODUCT. Explicitly (:import-from) only those you need or
explicitly package-qualify the symbols. Don't (:use)!


Function BUBBLE-OPERATOR-UPWARDS operator form
  &amp;key (result-kind :abridged)
       (if-collapsed nil)
       (collapsed-identity (ecase result-kind
                             ((:full :abridged)
                              (list operator))
                             (:branches nil)))

  Bubbles OPERATOR upwards in FORM, demultiplexing all alternative
  branches by way of cartesian product. Hard to describe formally, but
  the examples above should give some inspiration for the basic
  effect, and some experimentation in the REPL is recommended.

  RESULT-KIND is one of :branches, :full or :abridged.

  - :branches simply returns the demultiplexed branches.

  - :full returns the same result as :branches would,
    except wrapped in a cons whose CAR is OPERATOR.

  - :abridged returns the same result as :full would,
    except if there's only one branch, only that branch
    is returned, without the wrapping.

  IF-COLLAPSED and COLLAPSED-IDENTITY determine what to do if the
  number of branches "collapses" to zero. IF-COLLAPSED is :error or
  NIL. If it's NIL and the result is indeed collapsed, then the value
  of COLLAPSED-IDENTITY will be returned.


Function CARTESIAN-PRODUCT &amp;rest possibility-groups

Returns the cartesian-product of all possible combinations from
POSSIBILITY-GROUPS, as a list.

This function is inherently needed to implement
BUBBLE-OPERATOR-UPWARDS, so might as well export it...

(cartesian-product '(1 2) '(a b c))
=&gt;
((1 A) (1 B) (1 C)
 (2 A) (2 B) (2 C))</pre>

    </div>

    <div id="footer">
      <div>
        <a href="#" class="back-to-top">⬆</a>
        <span class="page-badge"><a href="http://validator.w3.org/check?uri=http%3A%2F%2Fwww.hexstreamsoft.com%2Fprojects%2Fbubble-operator-upwards%2F"><span class="checkmark">✔</span> HTML5</a></span>
        <span class="page-badge"><a href="http://www.hexstreamsoft.com/README"><span class="checkmark">✔</span> Public Domain</a></span>
        <span class="page-badge"><a href="http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.hexstreamsoft.com%2Fprojects%2Fbubble-operator-upwards%2F"><span class="checkmark">✔</span> CSS3</a></span>
      </div>
    </div>

  </body>
</html>
