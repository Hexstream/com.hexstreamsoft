<html lang="en">
<head>
<title>UPDATEF - Place-utils Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Place-utils Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Reference.html#Reference" title="Reference">
<link rel="prev" href="WITH_002dRESOLVED_002dPLACES.html#WITH_002dRESOLVED_002dPLACES" title="WITH-RESOLVED-PLACES">
<link rel="next" href="BULKF.html#BULKF" title="BULKF">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual documents place-utils, which is a Common Lisp library that
provides a few utilities relating to setfable places.

The project's home is `http://www.hexstreamsoft.com/projects/place-utils'.

Originally authored by Jean-Philippe Paradis <hexstream@gmail.com>.

This project is in the public domain.
See the Unlicense appendix for details.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="UPDATEF"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="BULKF.html#BULKF">BULKF</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="WITH_002dRESOLVED_002dPLACES.html#WITH_002dRESOLVED_002dPLACES">WITH-RESOLVED-PLACES</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Reference.html#Reference">Reference</a>
<hr>
</div>

<h3 class="section">1.4 <code>updatef</code></h3>

<div class="defun">
&mdash; Modify Macro: <b>updatef</b><var> &amp;rest places-and-update-functions &rArr; results<a name="index-updatef-3"></a></var><br>
<blockquote><p><code>updatef</code> is exactly like <code>setf</code>, except that instead of
directly providing new values to store into the place, one provides
update functions that will be called with the corresponding old
value. Each store variable is bound to the result of calling the
corresponding update function with the old value, then the storing
form is evaluated.

     <pre class="lisp">          (defun double (number) (* number 2))
          
          (let ((a 2) (b 8))
            (updatef (values a b) #'double)
            (values a b))
          &rArr; 4, NIL
          
          (let ((a 2) (b 8))
            (updatef a #'1+
                     a #'double
                     b #'-)
            (values a b))
          &rArr; 6, -8
          
          (let ((a #(1 2)))
            (updatef (aref (print a) (print 1))
                     (print #'double))
            a)
          -| #(1 2)
          -| 1
          -| #&lt;FUNCTION DOUBLE&gt;
          &rArr; #(1 4)
</pre>
        </blockquote></div>

   </body></html>

