<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="Jean-Philippe Paradis" />
    <link rel="author" href="https://www.hexstreamsoft.com/introduction.html" />
    <link rel="license" href="https://www.hexstreamsoft.com/UNLICENSE" />
    <link rel="prev" href="with-resolved-places.html" />
    <link rel="next" href="bulkf.html" />
    <title>updatef | place-utils | Libraries | HexstreamSoft</title>
    <link href="../../css/global.css" rel="stylesheet" type="text/css" />
    <link href="../libraries.css" rel="stylesheet" type="text/css" />
    <script src="https://global.hexstreamsoft.com/scripts/global.js"></script>
    <script src="../../scripts/global.js"></script>
  </head>
  <body>

    <nav id="site-nav">

      <nav class="breadcrumbs-and-extras">

        <div class="breadcrumbs">
          <a href="../../">HexstreamSoft</a>
          <span class="separator"> » </span>
          <a href="../">Libraries</a>
          <span class="separator"> » </span>
          <a href="../#uncategorized">Uncategorized</a>
          <span class="separator"> » </span>
          <a href="./">place-utils</a>
          <span class="separator"> » </span>
          <a class="here">updatef</a>
          <div class="float-clear"></div>
        </div>

        <nav id="meta-nav">
          <a href="https://www.hexstreamsoft.com/libraries/place-utils/updatef.html">
            <abbr title="Canonical">C</abbr>
          </a>
          <a href="https://github.com/Hexstream/www.hexstreamsoft.com/blob/master/libraries/place-utils/updatef.html">
            <abbr title="Source">S</abbr>
          </a>
        </nav>

        <nav>
          <a class="sequential-link prev" href="with-resolved-places.html">←</a>
          <a href="./">
            Utilities
            <span>3/9</span>
          </a>
          <a class="sequential-link next" href="bulkf.html">→</a>
        </nav>

        <div class="float-clear"></div>

      </nav>



      <nav class="ancestors-nav">

        <div class="level-separator"></div>

        <nav class="navbox" id="place-utils_navbox">
          <h1 class="box-header"><a href="./">place-utils</a></h1>
          <ul>
            <li><a href="setf-expanderlet.html">setf-expanderlet</a></li>
            <li><a href="with-resolved-places.html">with-resolved-places</a></li>
            <li>
              <a class="here">
                updatef
                <span class="here-indicator-left"> </span>
                <span class="here-indicator-right"></span>
              </a>
            </li>
            <li><a href="bulkf.html">bulkf</a></li>
            <li><a href="funcallf-applyf.html">funcallf/applyf</a></li>
            <li><a href="cachef.html">cachef</a></li>
            <li><a href="oldf.html">oldf</a></li>
            <li><a href="readf.html">readf</a></li>
            <li><a href="tracef.html">tracef</a></li>
          </ul>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox empty collapsed">
          <h1><a href="../#uncategorized">Uncategorized</a></h1>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox empty collapsed">
          <h1 class="box-header">
            <a href="../">Libraries</a>
          </h1>
        </nav>

        <div class="level-separator"></div>

        <nav class="navbox" id="main_navbox">
          <h1>
            <a href="../../">HexstreamSoft</a>
          </h1>
          <ul>
            <li><a href="../">Libraries <span class="here-indicator-left"> </span> <span class="here-indicator-right"> </span></a></li>
            <li><a href="../../articles/">Articles</a></li>
            <li><a href="../../accounts/">Accounts</a></li>
            <li><a href="../../resources/">Resources</a></li>
          </ul>
          <ul>
            <li><a href="https://worknotes.hexstreamsoft.com/">Worknotes</a></li>
            <li><a href="https://status-quo.hexstreamsoft.com/">Status quo</a></li>
          </ul>
        </nav>

      </nav>

    </nav>

    <main>

      <header id="page-header">
        <h1>updatef</h1>
        <p class="description">Like setf, except supply update functions (to be called with old values) instead of new values.</p>
      </header>

      <dl>
        <dt><pre>Modify Macro <code class="common-lisp library macro operator">updatef</code> &amp;rest <var>places-and-update-functions</var>
  &rArr; <var>results</var></pre></dt>
        <dd>
          <p><code class="common-lisp library macro operator">updatef</code> is exactly like <code class="common-lisp standard macro operator">setf</code>, except that instead of directly providing new values to store into the place, one provides update functions that will be called with the corresponding old value. Each store variable is bound to the result of calling the corresponding update function with the old value, then the storing form is evaluated.</p>
          <pre class="example"><code class="common-lisp">(defun double (<var>number</var>) (* <var>number</var> 2))

(let ((<var>a</var> 2) (<var>b</var> 8))
  (<code class="common-lisp library macro operator">updatef</code> (values <var>a</var> <var>b</var>) #'double)
  (values <var>a</var> <var>b</var>))

&rArr; 4, NIL</code></pre>
          <pre class="example"><code class="common-lisp">(let ((<var>a</var> 2) (<var>b</var> 8))
  (<code class="common-lisp library macro operator">updatef</code> <var>a</var> #'1+
           <var>a</var> #'double
           <var>b</var> #'-)
  (values <var>a</var> <var>b</var>))

&rArr; 6, -8</code></pre>
          <pre class="example"><code class="common-lisp">(let ((<var>a</var> #(1 2)))
  (<code class="common-lisp library macro operator">updatef</code> (aref (print <var>a</var>) (print 1))
           (print #'double))
  <var>a</var>)
  -| #(1 2)
  -| 1
  -| #&lt;FUNCTION DOUBLE&gt;

&rArr; #(1 4)</code></pre>
        </dd>
      </dl>

    </main>

    <footer id="footer">
      <div>
        <a href="#" class="back-to-top">⬆</a>
        <span class="page-badge"><a href="http://validator.w3.org/check?uri=http%3A%2F%2Fwww.hexstreamsoft.com%2Flibraries%2Fplace-utils%2Fupdatef.html"><span class="checkmark">✔</span> HTML5</a></span>
        <span class="page-badge"><a href="https://www.hexstreamsoft.com/README"><span class="checkmark">✔</span> Public Domain</a></span>
        <span class="page-badge"><a href="http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.hexstreamsoft.com%2Flibraries%2Fplace-utils%2Fupdatef.html"><span class="checkmark">✔</span> CSS3</a></span>
      </div>
    </footer>

  </body>
</html>
